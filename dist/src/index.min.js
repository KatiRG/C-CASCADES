!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}function i(t){return"object"==typeof t?null!==t:"function"==typeof t}function T(t){if(!i(t))throw TypeError(t+" is not an object!");return t}function u(t){try{return!!t()}catch(t){return!0}}function r(t){return s?l.createElement(t):{}}function x(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}var h=t(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),v=(h.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=t(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:h.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),e=0,n=Math.random(),d=t(function(t){var e=o("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:a)("Symbol."+t))}).store=e}),c=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=v.document,s=i(l)&&i(l.createElement),f=!c&&!u(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),p=Object.defineProperty,g={f:c?Object.defineProperty:function(t,e,n){if(T(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),T(n),f)try{return p(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=c?function(t,e,n){return g.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},y=d("unscopables"),m=Array.prototype;null==m[y]&&b(m,y,{});function k(t){m[y][t]=!0}function L(t,e){return{value:e,done:!!t}}function w(t){return C.call(t).slice(8,-1)}function A(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function O(t){return I(A(t))}function S(t,e){return j.call(t,e)}function _(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function E(r,a,t){if(_(r),void 0===a)return r;switch(t){case 1:return function(t){return r.call(a,t)};case 2:return function(t,e){return r.call(a,t,e)};case 3:return function(t,e,n){return r.call(a,t,e,n)}}return function(){return r.apply(a,arguments)}}var R={},C={}.toString,I=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==w(t)?t.split(""):Object(t)},j={}.hasOwnProperty,B=o("native-function-to-string",Function.toString),M=t(function(t){var i=a("src"),e="toString",o=(""+B).split(e);h.inspectSource=function(t){return B.call(t)},(t.exports=function(t,e,n,r){var a="function"==typeof n;a&&(S(n,"name")||b(n,"name",e)),t[e]!==n&&(a&&(S(n,i)||b(n,i,t[e]?""+t[e]:o.join(String(e)))),t===v?t[e]=n:r?t[e]?t[e]=n:b(t,e,n):(delete t[e],b(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||B.call(this)})}),P="prototype",F=function(t,e,n){var r,a,i,o,c=t&F.F,l=t&F.G,s=t&F.S,u=t&F.P,d=t&F.B,f=l?v:s?v[e]||(v[e]={}):(v[e]||{})[P],p=l?h:h[e]||(h[e]={}),g=p[P]||(p[P]={});for(r in l&&(n=e),n)i=((a=!c&&f&&void 0!==f[r])?f:n)[r],o=d&&a?E(i,v):u&&"function"==typeof i?E(Function.call,i):i,f&&M(f,r,i,t&F.U),p[r]!=i&&b(p,r,o),u&&g[r]!=i&&(g[r]=i)};v.core=h,F.F=1,F.G=2,F.S=4,F.P=8,F.B=16,F.W=32,F.U=64,F.R=128;function H(t){return isNaN(t=+t)?0:(0<t?z:W)(t)}function N(t){return 0<t?Y(H(t),9007199254740991):0}function D(c){return function(t,e,n){var r,a=O(t),i=N(a.length),o=function(t,e){return(t=H(t))<0?q(t+e,0):X(t,e)}(n,i);if(c&&e!=e){for(;o<i;)if((r=a[o++])!=r)return!0}else for(;o<i;o++)if((c||o in a)&&a[o]===e)return c||o||0;return!c&&-1}}function U(t){return J[t]||(J[t]=a(t))}function G(){}function $(t,e,n){t&&!S(t=n?t:t.prototype,st)&&lt(t,st,{configurable:!0,value:e})}var V=F,W=Math.ceil,z=Math.floor,Y=Math.min,q=Math.max,X=Math.min,J=o("keys"),K=D(!1),Q=U("IE_PROTO"),Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return function(t,e){var n,r=O(t),a=0,i=[];for(n in r)n!=Q&&S(r,n)&&i.push(n);for(;e.length>a;)S(r,n=e[a++])&&(~K(i,n)||i.push(n));return i}(t,Z)},et=c?Object.defineProperties:function(t,e){T(t);for(var n,r=tt(e),a=r.length,i=0;i<a;)g.f(t,n=r[i++],e[n]);return t},nt=v.document,rt=nt&&nt.documentElement,at=U("IE_PROTO"),it="prototype",ot=function(){var t,e=r("iframe"),n=Z.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ot=t.F;n--;)delete ot[it][Z[n]];return ot()},ct=Object.create||function(t,e){var n;return null!==t?(G[it]=T(t),n=new G,G[it]=null,n[at]=t):n=ot(),void 0===e?n:et(n,e)},lt=g.f,st=d("toStringTag"),ut={};b(ut,d("iterator"),function(){return this});function dt(t){return Object(A(t))}function ft(){return this}var pt=U("IE_PROTO"),gt=Object.prototype,ht=Object.getPrototypeOf||function(t){return t=dt(t),S(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?gt:null},vt=d("iterator"),yt=!([].keys&&"next"in[].keys()),mt="values",xt=function(t,e,n,r,a,i,o){!function(t,e,n){t.prototype=ct(ut,{next:x(1,n)}),$(t,e+" Iterator")}(n,e,r);function c(t){if(!yt&&t in g)return g[t];switch(t){case"keys":case mt:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var l,s,u,d=e+" Iterator",f=a==mt,p=!1,g=t.prototype,h=g[vt]||g["@@iterator"]||a&&g[a],v=h||c(a),y=a?f?c("entries"):v:void 0,m="Array"==e&&g.entries||h;if(m&&(u=ht(m.call(new t)))!==Object.prototype&&u.next&&($(u,d,!0),"function"!=typeof u[vt]&&b(u,vt,ft)),f&&h&&h.name!==mt&&(p=!0,v=function(){return h.call(this)}),!yt&&!p&&g[vt]||b(g,vt,v),R[e]=v,R[d]=ft,a)if(l={values:f?v:c(mt),keys:i?v:c("keys"),entries:y},o)for(s in l)s in g||M(g,s,l[s]);else V(V.P+V.F*(yt||p),e,l);return l}(Array,"Array",function(t,e){this._t=O(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,L(1)):L(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");R.Arguments=R.Array,k("keys"),k("values"),k("entries");for(var bt=d("iterator"),kt=d("toStringTag"),Lt=R.Array,wt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Tt=tt(wt),At=0;At<Tt.length;At++){var Ot,St=Tt[At],_t=wt[St],Et=v[St],Rt=Et&&Et.prototype;if(Rt&&(Rt[bt]||b(Rt,bt,Lt),Rt[kt]||b(Rt,kt,St),R[St]=Lt,_t))for(Ot in xt)Rt[Ot]||M(Rt,Ot,xt[Ot],!0)}function Ct(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),It))?n:jt?w(e):"Object"==(r=w(e))&&"function"==typeof e.callee?"Arguments":r}var It=d("toStringTag"),jt="Arguments"==w(function(){return arguments}()),Bt={};Bt[d("toStringTag")]="z",Bt+""!="[object z]"&&M(Object.prototype,"toString",function(){return"[object "+Ct(this)+"]"},!0);var Mt=D(!0);V(V.P,"Array",{includes:function(t,e){return Mt(this,t,1<arguments.length?e:void 0)}}),k("includes");function Pt(t){var e;return i(t)&&(void 0!==(e=t[Ft])?!!e:"RegExp"==w(t))}var Ft=d("match"),Ht=d("match"),Nt="includes";V(V.P+V.F*function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Ht]=!1,!"/./"[e](n)}catch(t){}}return!0}(Nt),"String",{includes:function(t,e){return!!~function(t,e,n){if(Pt(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(A(t))}(this,t,Nt).indexOf(t,1<arguments.length?e:void 0)}});function Dt(t,e,n){return e+(n?zt(t,e).length:1)}function Ut(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Ct(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Yt.call(t,e)}var Gt,$t,Vt,Wt=d("species"),zt=(Gt=!0,function(t,e){var n,r,a=String(A(t)),i=H(e),o=a.length;return i<0||o<=i?Gt?"":void 0:(n=a.charCodeAt(i))<55296||56319<n||i+1===o||(r=a.charCodeAt(i+1))<56320||57343<r?Gt?a.charAt(i):n:Gt?a.slice(i,i+2):r-56320+(n-55296<<10)+65536}),Yt=RegExp.prototype.exec,qt=RegExp.prototype.exec,Xt=String.prototype.replace,Jt=qt,Kt="lastIndex",Qt=($t=/a/,Vt=/b*/g,qt.call($t,"a"),qt.call(Vt,"a"),0!==$t[Kt]||0!==Vt[Kt]),Zt=void 0!==/()??/.exec("")[1];(Qt||Zt)&&(Jt=function(t){var e,n,r,a,i=this;return Zt&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var t=T(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i))),Qt&&(e=i[Kt]),r=qt.call(i,t),Qt&&r&&(i[Kt]=i.global?r.index+r[0].length:e),Zt&&r&&1<r.length&&Xt.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var te=Jt;V({target:"RegExp",proto:!0,forced:te!==/./.exec},{exec:te});function ee(n,t,e){var r=d(n),i=!u(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),a=i?!u(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[ne]=function(){return e}),e[r](""),!t}):void 0;if(!i||!a||"replace"===n&&!re||"split"===n&&!ae){var o=/./[r],c=e(A,r,""[n],function(t,e,n,r,a){return e.exec===te?i&&!a?{done:!0,value:o.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),l=c[0],s=c[1];M(String.prototype,n,l),b(RegExp.prototype,r,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}}var ne=d("species"),re=!u(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ae=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ie=Math.min,oe=[].push,ce="split",le="length",se="lastIndex",ue=4294967295,de=!u(function(){});ee("split",2,function(a,i,v,y){var m;return m="c"=="abbc"[ce](/(b)*/)[1]||4!="test"[ce](/(?:)/,-1)[le]||2!="ab"[ce](/(?:ab)*/)[le]||4!="."[ce](/(.?)(.?)/)[le]||1<"."[ce](/()()/)[le]||""[ce](/.?/)[le]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!Pt(t))return v.call(n,t,e);for(var r,a,i,o=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,s=void 0===e?ue:e>>>0,u=new RegExp(t.source,c+"g");(r=te.call(u,n))&&!(l<(a=u[se])&&(o.push(n.slice(l,r.index)),1<r[le]&&r.index<n[le]&&oe.apply(o,r.slice(1)),i=r[0][le],l=a,o[le]>=s));)u[se]===r.index&&u[se]++;return l===n[le]?!i&&u.test("")||o.push(""):o.push(n.slice(l)),o[le]>s?o.slice(0,s):o}:"0"[ce](void 0,0)[le]?function(t,e){return void 0===t&&0===e?[]:v.call(this,t,e)}:v,[function(t,e){var n=a(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):m.call(String(n),t,e)},function(t,e){var n=y(m,t,this,e,m!==v);if(n.done)return n.value;var r=T(t),a=String(this),i=function(t,e){var n,r=T(t).constructor;return void 0===r||null==(n=T(r)[Wt])?e:_(n)}(r,RegExp),o=r.unicode,c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(de?"y":"g"),l=new i(de?r:"^(?:"+r.source+")",c),s=void 0===e?ue:e>>>0;if(0==s)return[];if(0===a.length)return null===Ut(l,a)?[a]:[];for(var u=0,d=0,f=[];d<a.length;){l.lastIndex=de?d:0;var p,g=Ut(l,de?a:a.slice(d));if(null===g||(p=ie(N(l.lastIndex+(de?0:d)),a.length))===u)d=Dt(a,d,o);else{if(f.push(a.slice(u,d)),f.length===s)return f;for(var h=1;h<=g.length-1;h++)if(f.push(g[h]),f.length===s)return f;d=u=p}}return f.push(a.slice(u)),f}]});function fe(t,e){return new(function(t){var e;return he(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!he(e.prototype)||(e=void 0),i(e)&&null===(e=e[ve])&&(e=void 0)),void 0===e?Array:e}(t))(e)}function pe(d,t){var f=1==d,p=2==d,g=3==d,h=4==d,v=6==d,y=5==d||v,m=t||fe;return function(t,e,n){for(var r,a,i=dt(t),o=I(i),c=E(e,n,3),l=N(o.length),s=0,u=f?m(t,l):p?m(t,0):void 0;s<l;s++)if((y||s in o)&&(a=c(r=o[s],s,i),d))if(f)u[s]=a;else if(a)switch(d){case 3:return!0;case 5:return r;case 6:return s;case 2:u.push(r)}else if(h)return!1;return v?-1:g||h?h:u}}function ge(t,e){return!!t&&u(function(){e?t.call(null,function(){},1):t.call(null)})}var he=Array.isArray||function(t){return"Array"==w(t)},ve=d("species"),ye=pe(2);V(V.P+V.F*!ge([].filter,!0),"Array",{filter:function(t,e){return ye(this,t,e)}});var me=Math.max,xe=Math.min,be=Math.floor,ke=/\$([$&`']|\d\d?|<[^>]*>)/g,Le=/\$([$&`']|\d\d?)/g;ee("replace",2,function(a,i,k,L){return[function(t,e){var n=a(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):k.call(String(n),t,e)},function(t,e){var n=L(k,t,this,e);if(n.done)return n.value;var r=T(t),a=String(this),i="function"==typeof e;i||(e=String(e));var o=r.global;if(o){var c=r.unicode;r.lastIndex=0}for(var l=[];;){var s=Ut(r,a);if(null===s)break;if(l.push(s),!o)break;""===String(s[0])&&(r.lastIndex=Dt(a,N(r.lastIndex),c))}for(var u,d="",f=0,p=0;p<l.length;p++){s=l[p];for(var g=String(s[0]),h=me(xe(H(s.index),a.length),0),v=[],y=1;y<s.length;y++)v.push(void 0===(u=s[y])?u:String(u));var m=s.groups;if(i){var x=[g].concat(v,h,a);void 0!==m&&x.push(m);var b=String(e.apply(void 0,x))}else b=w(g,a,h,v,m,e);f<=h&&(d+=a.slice(f,h)+b,f=h+g.length)}return d+a.slice(f)}];function w(i,o,c,l,s,t){var u=c+i.length,d=l.length,e=Le;return void 0!==s&&(s=dt(s),e=ke),k.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return i;case"`":return o.slice(0,c);case"'":return o.slice(u);case"<":n=s[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(d<r){var a=be(r/10);return 0===a?t:a<=d?void 0===l[a-1]?e.charAt(1):l[a-1]+e.charAt(1):t}n=l[r-1]}return void 0===n?"":n})}});var we=[].sort,Te=[1,2,3];V(V.P+V.F*(u(function(){Te.sort(void 0)})||!u(function(){Te.sort(null)})||!ge(we)),"Array",{sort:function(t){return void 0===t?we.call(dt(this)):we.call(dt(this),_(t))}});var Ae=pe(1);V(V.P+V.F*!ge([].map,!0),"Array",{map:function(t,e){return Ae(this,t,e)}});var Oe=g.f,Se=Function.prototype,_e=/^\s*function ([^ (]*)/;"name"in Se||c&&Oe(Se,"name",{configurable:!0,get:function(){try{return(""+this).match(_e)[1]}catch(t){return""}}});var Ee=pe(0),Re=ge([].forEach,!0);V(V.P+V.F*!Re,"Array",{forEach:function(t,e){return Ee(this,t,e)}});var Ce,Ie,je=/"/g;(Ie={})[Ce="link"]=function(e){return function(t){return e(this,"a","href",t)}}(function(t,e,n,r){var a=String(A(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(r).replace(je,"&quot;")+'"'),i+">"+a+"</"+e+">"}),V(V.P+V.F*u(function(){var t=""[Ce]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",Ie);function Be(t){var e=0<arguments.length&&void 0!==t?t:"",s={},u={},d={},f={},p={},g={},h={},v={},y=d3.select(".data.sankey1").append("svg").attr("id","chart1"),m=d3.select(".data.sankey2").append("svg").attr("id","chart2"),x=d3.select(".data.SAdata").append("svg").attr("id","stackedbar_SA"),b=d3.select(".data.AFdata").append("svg").attr("id","stackedbar_Africa"),k=d3.select(".data.ASdata").append("svg").attr("id","stackedbar_Asia"),L=d3.select(".data.NAdata").append("svg").attr("id","stackedbar_NAmer"),w=d3.select(".data.OCdata").append("svg").attr("id","stackedbar_Oceania"),T=d3.select(".data.EUdata").append("svg").attr("id","stackedbar_Europe");function A(i,t,e,n){var r=e.width,a=Math.ceil(r/e.aspectRatio),o=a-e.margin.top-e.margin.bottom,c=r-e.margin.left-e.margin.right,l=t.select("g.margin-offset"),s=l.select(".data");t.attr("viewBox","".concat(e.viewBox.x," ").concat(e.viewBox.y," ").concat(r," ").concat(a)).attr("preserveAspectRatio","xMidYMid meet").attr("role","img"),l.empty()&&(l=t.append("g").attr("class","margin-offset").attr("transform","translate("+e.margin.left+","+e.margin.top+")")),d3.stcExt.addIEShim(t,a,r);var u=d3.sankey().nodeWidth(30).nodePadding(20).size([c,o]),d=u.link();!function(t){var e={};t.nodes.forEach(function(t){e[t.name]=t}),t.links=t.links.map(function(t){return{source:e[t.source],target:e[t.target],value:t.value}}),t.nodes.sort(function(t,e){return d3.descending(t.value,e.value)}),u.nodes(t.nodes).links(t.links).layout(32);var n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);s.empty()&&(s=l.append("g").attr("class","data"));s.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class",function(t){var e="from".concat(t.source.name.replace(/\s+/g,"")).concat(i),n="to".concat(t.target.name.replace(/\s+/g,"")).concat(i);return"link ".concat(e," ").concat(n)}).attr("d",d).attr("id",function(t,e){return t.id=e,"chart".concat(i,"_link-").concat(e)}).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).on("mousemove",function(t){d3.selectAll(".link:not(#".concat(this.id,")")).style("opacity",.5),function(t,e){d3.selectAll("rect").classed("rectInactive",!0);var n=0<t.source.sourceLinks.length?t.source.name:t.target.name,r=d3.select("#"+e.id).attr("class").split(" ").filter(function(t){return t.includes("to")})[0].split("to")[1].slice(0,-1);d3.select("#chart".concat(i)).select("rect.".concat(n)).classed("rectInactive",!1),d3.select("#chart".concat(i)).select("rect.".concat(r)).classed("rectInactive",!1)}(t,this);var e=i18next.t(t.source.name,{ns:"labels"});n.transition().style("opacity",.9),n.html("<b>".concat(e,"</b><br><br>\n            <table>\n                <tr>\n                  <td>").concat(t.target.name," flux: </td>\n                  <td><b>").concat(Ge.formatNum(t.value),"</td>\n                  <td> ").concat(i18next.t("units",{ns:"constants"})," </td>\n              </tr>\n            </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".link:not(#chart".concat(i,"_").concat(this.id,")")).style("opacity",1),d3.selectAll("rect").classed("rectInactive",!1),n.transition().style("opacity",0)});var r=s.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class",function(){return"node regions"}).attr("transform",function(t){return"translate(".concat(t.x,",").concat(t.y,")")}).style("cursor",function(){return"crosshair"});r.append("rect").attr("height",function(t){return t.dy}).attr("width",u.nodeWidth()).attr("class",function(t){return t.name.replace(/\s/g,"")}),r.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return i18next.t(t.name,{ns:"labels"})}).filter(function(t){return t.x<c/2}).attr("x",6+u.nodeWidth()).attr("text-anchor","start"),r.on("mousemove",function(t){!function(t){var e,n,r,a;d3.select("#chart"+i).selectAll("rect:not(.".concat(t.name.replace(/\s+/g,""),")")).classed("rectInactive",!0),d3.selectAll(".link").classed("inactive",!0),0<t.sourceLinks.length?(r=t.sourceLinks,a="target",n=d3.selectAll(".from".concat(t.name.replace(/\s+/g,"")).concat(i))):0<t.targetLinks.length&&(r=t.targetLinks,a="source",n=d3.selectAll(".to".concat(t.name.replace(/\s+/g,"")).concat(i))),n.classed("inactive",!n.classed("inactive")),n.classed("active",!0),r.map(function(t){e=t[a].name.replace(/\s+/g,""),d3.select("#chart".concat(i)).select("rect.".concat(e)).classed("rectInactive",!1)})}(t);var e=i18next.t(t.name,{ns:"labels"});n.transition().style("opacity",.9),n.html("<b>".concat(e,"</b><br><br>\n            <table>\n              <tr>\n                <td> Total flux: </td>\n                <td><b>").concat(Ge.formatNum(t.value),"</td>\n                <td> ").concat(i18next.t("units",{ns:"constants"})," </td>\n              </tr>\n            </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".inactive").classed("inactive",!1),d3.selectAll(".active").classed("active",!1),d3.selectAll("rect").classed("rectInactive",!1),n.transition().style("opacity",0)})}(n)}function O(t,e,n){var r=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),a=e.width,i=Math.ceil(a/e.aspectRatio),o=i-e.margin.top-e.margin.bottom,c=a-e.margin.left-e.margin.right,l=t.select("g.margin-offset");t.attr("viewBox","".concat(e.viewBox.x," ").concat(e.viewBox.y," ").concat(a," ").concat(i)).attr("preserveAspectRatio","xMidYMid meet").attr("role","img");var s=l.select(".x.axis"),u=l.select(".y.axis");l.empty()&&(l=t.append("g").attr("class","margin-offset").attr("transform","translate("+e.margin.left+","+e.margin.top+")"));var d=d3.scaleBand().rangeRound([5,c],e.barWidth?e.barWidth:.1).paddingInner(.05),f=d3.scaleLinear().range([o,0]),p=d3.scaleOrdinal().range(["#A9C1D9","#607890","#ABBE71"]),g=d3.axisBottom(d),h=d3.axisLeft(f).tickFormat(d3.format(".2s")).ticks(e.y.ticks);p.domain(d3.keys(n[0]).filter(function(t){return"country"!==t})),n.forEach(function(e){var n=e.country,r=0;e.flux=p.domain().map(function(t){return{country:n,loac:t,y0:r,y1:r+=+e[t]}}),e.total=e.flux[e.flux.length-1].y1}),n.sort(function(t,e){return e.total-t.total}),d.domain(n.map(function(t){return t.country})),f.domain([0,d3.max(n,function(t){return t.total})]),(s=l.select(".x.axis")).empty()&&(s=l.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o,")"))),s.call(g),(u=l.select(".y.axis")).empty()&&(u=l.append("g").attr("class","y axis").attr("aria-hidden","true"),e.showUnits&&u.append("text").attr("class","chart-label").attr("x",-50).attr("y",0).attr("dy","-0.5em").attr("text-anchor","start").html("".concat(i18next.t("units",{ns:"constants"}))).append("tspan").text("-1").style("font-size","9px").attr("y",-11).attr("dx",".01em").attr("dy","-.2em")),u.call(h);var v=t.selectAll(".country").data(n).enter().append("g").attr("class","g");v.selectAll("rect").data(function(t){return t.flux}).enter().append("rect").attr("class",function(t){return t.loac}).attr("x",function(t){return d(t.country)+e.margin.left}).attr("y",function(t){return f(t.y1)}).attr("width",d.bandwidth()).attr("height",function(t){return f(t.y0)-f(t.y1)}),v.selectAll("rect").on("mousemove",function(t){var e=t.y1-t.y0;r.transition().style("opacity",.9),r.html("<b> ".concat(t.loac," </b><br><br>\n                <table>\n                  <tr>\n                    <td><b>").concat(Ge.formatNum(e)," </td>\n                    <td> ").concat(i18next.t("units",{ns:"constants"})," </td>\n                  </tr>\n                </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){r.transition().style("opacity",0)}),d3.stcExt.addIEShim(t,i,a)}d3.select("#helpButton").on("click",function(){!function(){var t={parentContainerId:"#thisContainer"};t.helpArray=[{linkType:"dotOnly",divToHelpId:"helpInlandwater",text:i18next.t("helpInlandwater",{ns:"helpOverlay"}),marginTop:235,marginLeft:-430,textLengthByLine:70,myTitle:i18next.t("helpTitle",{ns:"helpOverlay"})},{linkType:"dotOnly",divToHelpId:"helpLakeRef",text:i18next.t("helpLakeRef",{ns:"helpOverlay"}),marginTop:310,marginLeft:-410,textLengthByLine:30},{linkType:"middle",divToHelpId:"helpHighLat",text:i18next.t("helpHighLat",{ns:"helpOverlay"}),marginTop:400,marginLeft:-37,textLengthByLine:40},{linkType:"dotOnly",divToHelpId:"helpEstRef",text:i18next.t("helpEstRef",{ns:"helpOverlay"}),marginTop:480,marginLeft:-410,textLengthByLine:30},{linkType:"dotOnly",divToHelpId:"helpLowLat",text:i18next.t("helpLowLat",{ns:"helpOverlay"}),marginTop:690,marginLeft:-410,textLengthByLine:50},{linkType:"middle",divToHelpId:"helpCountry",text:i18next.t("helpCountry",{ns:"helpOverlay"}),marginTop:350,marginLeft:465,textLengthByLine:25},{linkType:"middle",divToHelpId:"helpRivers",text:i18next.t("helpRivers",{ns:"helpOverlay"}),marginTop:235,marginLeft:320,textLengthByLine:30},{linkType:"dotOnly",divToHelpId:"helpAsia",text:i18next.t("helpAsia",{ns:"helpOverlay"}),marginTop:520,marginLeft:170,textLengthByLine:30},{linkType:"dotOnly",divToHelpId:"helpLakes",text:i18next.t("helpLakes",{ns:"helpOverlay"}),marginTop:640,marginLeft:3,textLengthByLine:50},{linkType:"dotOnly",divToHelpId:"helpEstuaries",text:i18next.t("helpEstuaries",{ns:"helpOverlay"}),marginTop:807,marginLeft:3,textLengthByLine:60}],new window.Help(t)}()}),i18n.load(["".concat(e,"/src/i18n")],function(){d3.queue().defer(d3.json,"".concat(e,"/data/LOAC_budget_TgCyr181113_sankey1.json")).defer(d3.json,"".concat(e,"/data/LOAC_budget_TgCyr181113_sankey2.json")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_SAmer.csv")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_Africa.csv")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_Asia.csv")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_NAmer.csv")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_Oceania.csv")).defer(d3.csv,"".concat(e,"/data/LOAC_budget_TgCyr181113_stackedbar_Europe.csv")).await(function(t,e,n,r,a,i,o,c,l){s=e,u=n,d=r,f=a,p=i,g=o,h=c,v=l,d3.select("#titletag").html(i18next.t("titletag",{ns:"pageText"})),d3.select("#pageTitle").html(i18next.t("title",{ns:"pageText"})),d3.select("#infotext").html(i18next.t("infotext",{ns:"pageText"})),d3.select("#subtitle").html(i18next.t("subtitle",{ns:"pageText"})),A(1,y,Me,s),A(2,m,Me,u),O(x,Pe,d),O(b,Fe,f),O(k,He,p),O(L,Ne,g),O(w,De,h),O(T,Ue,v)})})}var Me={margin:{top:5,right:0,left:2,bottom:10},aspectRatio:16/30,width:480,viewBox:{x:0,y:0}},Pe={margin:{top:0,right:20,left:25,bottom:47},aspectRatio:.91,width:220,showUnits:!0,x:{ticks:8},y:{ticks:3},viewBox:{x:-25,y:-22}},Fe={margin:{top:0,right:60,left:50,bottom:25},aspectRatio:1.6,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:0,y:-2}},He={margin:{top:0,right:20,left:25,bottom:19},aspectRatio:.88,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:-25,y:0}},Ne={margin:{top:0,right:60,left:50,bottom:40},aspectRatio:1.1,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:0,y:-15}},De={margin:{top:0,right:70,left:50,bottom:22},aspectRatio:4.5,width:220,showUnits:!1,x:{ticks:8},y:{ticks:1},viewBox:{x:0,y:0}},Ue={margin:{top:0,right:0,left:50,bottom:40},aspectRatio:2.3,width:220,showUnits:!1,x:{ticks:8},y:{ticks:2},viewBox:{x:0,y:0}},Ge={_selfFormatter:i18n.getNumberFormatter(2),formatNum:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._selfFormatter.format(e)}};"undefined"!=typeof Drupal?Drupal.behaviors.dv={attach:function(t,e){Be(Drupal.settings.dv&&Drupal.settings.dv.urlRoot?Drupal.settings.dv.urlRoot:"")}}:Be(".")}();