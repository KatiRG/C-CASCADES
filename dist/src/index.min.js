!function(){"use strict";function t(t,n){return t(n={exports:{}},n.exports),n.exports}function a(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+e).toString(36))}function c(t){return"object"==typeof t?null!==t:"function"==typeof t}function S(t){if(!c(t))throw TypeError(t+" is not an object!");return t}function l(t){try{return!!t()}catch(t){return!0}}function r(t){return s?u.createElement(t):{}}function b(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}var g=t(function(t){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)}),h=(g.version,t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)})),o=t(function(t){var n="__core-js_shared__",e=h[n]||(h[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),n=0,e=Math.random(),f=t(function(t){var n=o("wks"),e=h.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:a)("Symbol."+t))}).store=n}),i=!l(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=h.document,s=c(u)&&c(u.createElement),d=!i&&!l(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),p=Object.defineProperty,v={f:i?Object.defineProperty:function(t,n,e){if(S(t),n=function(t,n){if(!c(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!c(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!c(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!c(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n,!0),S(e),d)try{return p(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},x=i?function(t,n,e){return v.f(t,n,b(1,e))}:function(t,n,e){return t[n]=e,t},y=f("unscopables"),m=Array.prototype;null==m[y]&&x(m,y,{});function _(t){m[y][t]=!0}function k(t,n){return{value:n,done:!!t}}function A(t){return j.call(t).slice(8,-1)}function O(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function L(t){return P(O(t))}function w(t,n){return M.call(t,n)}function T(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function E(r,a,t){if(T(r),void 0===a)return r;switch(t){case 1:return function(t){return r.call(a,t)};case 2:return function(t,n){return r.call(a,t,n)};case 3:return function(t,n,e){return r.call(a,t,n,e)}}return function(){return r.apply(a,arguments)}}var C={},j={}.toString,P=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==A(t)?t.split(""):Object(t)},M={}.hasOwnProperty,I=o("native-function-to-string",Function.toString),R=t(function(t){var c=a("src"),n="toString",o=(""+I).split(n);g.inspectSource=function(t){return I.call(t)},(t.exports=function(t,n,e,r){var a="function"==typeof e;a&&(w(e,"name")||x(e,"name",n)),t[n]!==e&&(a&&(w(e,c)||x(e,c,t[n]?""+t[n]:o.join(String(n)))),t===h?t[n]=e:r?t[n]?t[n]=e:x(t,n,e):(delete t[n],x(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[c]||I.call(this)})}),F="prototype",N=function(t,n,e){var r,a,c,o,i=t&N.F,u=t&N.G,s=t&N.S,l=t&N.P,f=t&N.B,d=u?h:s?h[n]||(h[n]={}):(h[n]||{})[F],p=u?g:g[n]||(g[n]={}),v=p[F]||(p[F]={});for(r in u&&(e=n),e)c=((a=!i&&d&&void 0!==d[r])?d:e)[r],o=f&&a?E(c,h):l&&"function"==typeof c?E(Function.call,c):c,d&&R(d,r,c,t&N.U),p[r]!=c&&x(p,r,o),l&&v[r]!=c&&(v[r]=c)};h.core=g,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;function G(t){return isNaN(t=+t)?0:(0<t?q:H)(t)}function $(t){return 0<t?U(G(t),9007199254740991):0}function z(i){return function(t,n,e){var r,a=L(t),c=$(a.length),o=function(t,n){return(t=G(t))<0?X(t+n,0):Y(t,n)}(e,c);if(i&&n!=n){for(;o<c;)if((r=a[o++])!=r)return!0}else for(;o<c;o++)if((i||o in a)&&a[o]===n)return i||o||0;return!i&&-1}}function B(t){return J[t]||(J[t]=a(t))}function D(){}function V(t,n,e){t&&!w(t=e?t:t.prototype,st)&&ut(t,st,{configurable:!0,value:n})}var W=N,H=Math.ceil,q=Math.floor,U=Math.min,X=Math.max,Y=Math.min,J=o("keys"),K=z(!1),Q=B("IE_PROTO"),Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return function(t,n){var e,r=L(t),a=0,c=[];for(e in r)e!=Q&&w(r,e)&&c.push(e);for(;n.length>a;)w(r,e=n[a++])&&(~K(c,e)||c.push(e));return c}(t,Z)},nt=i?Object.defineProperties:function(t,n){S(t);for(var e,r=tt(n),a=r.length,c=0;c<a;)v.f(t,e=r[c++],n[e]);return t},et=h.document,rt=et&&et.documentElement,at=B("IE_PROTO"),ct="prototype",ot=function(){var t,n=r("iframe"),e=Z.length;for(n.style.display="none",rt.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ot=t.F;e--;)delete ot[ct][Z[e]];return ot()},it=Object.create||function(t,n){var e;return null!==t?(D[ct]=S(t),e=new D,D[ct]=null,e[at]=t):e=ot(),void 0===n?e:nt(e,n)},ut=v.f,st=f("toStringTag"),lt={};x(lt,f("iterator"),function(){return this});function ft(t){return Object(O(t))}function dt(){return this}var pt=B("IE_PROTO"),vt=Object.prototype,gt=Object.getPrototypeOf||function(t){return t=ft(t),w(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?vt:null},ht=f("iterator"),yt=!([].keys&&"next"in[].keys()),mt="values",bt=function(t,n,e,r,a,c,o){!function(t,n,e){t.prototype=it(lt,{next:b(1,e)}),V(t,n+" Iterator")}(e,n,r);function i(t){if(!yt&&t in v)return v[t];switch(t){case"keys":case mt:return function(){return new e(this,t)}}return function(){return new e(this,t)}}var u,s,l,f=n+" Iterator",d=a==mt,p=!1,v=t.prototype,g=v[ht]||v["@@iterator"]||a&&v[a],h=g||i(a),y=a?d?i("entries"):h:void 0,m="Array"==n&&v.entries||g;if(m&&(l=gt(m.call(new t)))!==Object.prototype&&l.next&&(V(l,f,!0),"function"!=typeof l[ht]&&x(l,ht,dt)),d&&g&&g.name!==mt&&(p=!0,h=function(){return g.call(this)}),!yt&&!p&&v[ht]||x(v,ht,h),C[n]=h,C[f]=dt,a)if(u={values:d?h:i(mt),keys:c?h:i("keys"),entries:y},o)for(s in u)s in v||R(v,s,u[s]);else W(W.P+W.F*(yt||p),n,u);return u}(Array,"Array",function(t,n){this._t=L(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,k(1)):k(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");C.Arguments=C.Array,_("keys"),_("values"),_("entries");for(var xt=f("iterator"),_t=f("toStringTag"),kt=C.Array,At={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},St=tt(At),Ot=0;Ot<St.length;Ot++){var Lt,wt=St[Ot],Tt=At[wt],Et=h[wt],Ct=Et&&Et.prototype;if(Ct&&(Ct[xt]||x(Ct,xt,kt),Ct[_t]||x(Ct,_t,wt),C[wt]=kt,Tt))for(Lt in bt)Ct[Lt]||R(Ct,Lt,bt[Lt],!0)}function jt(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),Pt))?e:Mt?A(n):"Object"==(r=A(n))&&"function"==typeof n.callee?"Arguments":r}var Pt=f("toStringTag"),Mt="Arguments"==A(function(){return arguments}()),It={};It[f("toStringTag")]="z",It+""!="[object z]"&&R(Object.prototype,"toString",function(){return"[object "+jt(this)+"]"},!0);var Rt=z(!0);W(W.P,"Array",{includes:function(t){return Rt(this,t,1<arguments.length?arguments[1]:void 0)}}),_("includes");function Ft(t){var n;return c(t)&&(void 0!==(n=t[Nt])?!!n:"RegExp"==A(t))}var Nt=f("match"),Gt=f("match"),$t="includes";W(W.P+W.F*function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[Gt]=!1,!"/./"[n](e)}catch(t){}}return!0}($t),"String",{includes:function(t){return!!~function(t,n,e){if(Ft(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(O(t))}(this,t,$t).indexOf(t,1<arguments.length?arguments[1]:void 0)}});function zt(t,n){return new(function(t){var n;return Vt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Vt(n.prototype)||(n=void 0),c(n)&&null===(n=n[Wt])&&(n=void 0)),void 0===n?Array:n}(t))(n)}function Bt(f,t){var d=1==f,p=2==f,v=3==f,g=4==f,h=6==f,y=5==f||h,m=t||zt;return function(t,n,e){for(var r,a,c=ft(t),o=P(c),i=E(n,e,3),u=$(o.length),s=0,l=d?m(t,u):p?m(t,0):void 0;s<u;s++)if((y||s in o)&&(a=i(r=o[s],s,c),f))if(d)l[s]=a;else if(a)switch(f){case 3:return!0;case 5:return r;case 6:return s;case 2:l.push(r)}else if(g)return!1;return h?-1:v||g?g:l}}function Dt(t,n){return!!t&&l(function(){n?t.call(null,function(){},1):t.call(null)})}var Vt=Array.isArray||function(t){return"Array"==A(t)},Wt=f("species"),Ht=Bt(2);W(W.P+W.F*!Dt([].filter,!0),"Array",{filter:function(t){return Ht(this,t,arguments[1])}});function qt(t,n,e){return n+(e?Kt(t,n).length:1)}function Ut(t,n){var e=t.exec;if("function"==typeof e){var r=e.call(t,n);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==jt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Qt.call(t,n)}var Xt,Yt,Jt,Kt=(Xt=!0,function(t,n){var e,r,a=String(O(t)),c=G(n),o=a.length;return c<0||o<=c?Xt?"":void 0:(e=a.charCodeAt(c))<55296||56319<e||c+1===o||(r=a.charCodeAt(c+1))<56320||57343<r?Xt?a.charAt(c):e:Xt?a.slice(c,c+2):r-56320+(e-55296<<10)+65536}),Qt=RegExp.prototype.exec,Zt=RegExp.prototype.exec,tn=String.prototype.replace,nn=Zt,en="lastIndex",rn=(Yt=/a/,Jt=/b*/g,Zt.call(Yt,"a"),Zt.call(Jt,"a"),0!==Yt[en]||0!==Jt[en]),an=void 0!==/()??/.exec("")[1];(rn||an)&&(nn=function(t){var n,e,r,a,c=this;return an&&(e=new RegExp("^"+c.source+"$(?!\\s)",function(){var t=S(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}.call(c))),rn&&(n=c[en]),r=Zt.call(c,t),rn&&r&&(c[en]=c.global?r.index+r[0].length:n),an&&r&&1<r.length&&tn.call(r[0],e,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var cn=nn;W({target:"RegExp",proto:!0,forced:cn!==/./.exec},{exec:cn});function on(e,t,n){var r=f(e),c=!l(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),a=c?!l(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[un]=function(){return n}),n[r](""),!t}):void 0;if(!c||!a||"replace"===e&&!sn||"split"===e&&!ln){var o=/./[r],i=n(O,r,""[e],function(t,n,e,r,a){return n.exec===cn?c&&!a?{done:!0,value:o.call(n,e,r)}:{done:!0,value:t.call(e,n,r)}:{done:!1}}),u=i[0],s=i[1];R(String.prototype,e,u),x(RegExp.prototype,r,2==t?function(t,n){return s.call(t,this,n)}:function(t){return s.call(t,this)})}}var un=f("species"),sn=!l(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ln=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}(),fn=Math.max,dn=Math.min,pn=Math.floor,vn=/\$([$&`']|\d\d?|<[^>]*>)/g,gn=/\$([$&`']|\d\d?)/g;on("replace",2,function(a,c,_,k){return[function(t,n){var e=a(this),r=null==t?void 0:t[c];return void 0!==r?r.call(t,e,n):_.call(String(e),t,n)},function(t,n){var e=k(_,t,this,n);if(e.done)return e.value;var r=S(t),a=String(this),c="function"==typeof n;c||(n=String(n));var o=r.global;if(o){var i=r.unicode;r.lastIndex=0}for(var u=[];;){var s=Ut(r,a);if(null===s)break;if(u.push(s),!o)break;""===String(s[0])&&(r.lastIndex=qt(a,$(r.lastIndex),i))}for(var l,f="",d=0,p=0;p<u.length;p++){s=u[p];for(var v=String(s[0]),g=fn(dn(G(s.index),a.length),0),h=[],y=1;y<s.length;y++)h.push(void 0===(l=s[y])?l:String(l));var m=s.groups;if(c){var b=[v].concat(h,g,a);void 0!==m&&b.push(m);var x=String(n.apply(void 0,b))}else x=A(v,a,g,h,m,n);d<=g&&(f+=a.slice(d,g)+x,d=g+v.length)}return f+a.slice(d)}];function A(c,o,i,u,s,t){var l=i+c.length,f=u.length,n=gn;return void 0!==s&&(s=ft(s),n=vn),_.call(t,n,function(t,n){var e;switch(n.charAt(0)){case"$":return"$";case"&":return c;case"`":return o.slice(0,i);case"'":return o.slice(l);case"<":e=s[n.slice(1,-1)];break;default:var r=+n;if(0==r)return t;if(f<r){var a=pn(r/10);return 0===a?t:a<=f?void 0===u[a-1]?n.charAt(1):u[a-1]+n.charAt(1):t}e=u[r-1]}return void 0===e?"":e})}});var hn=[].sort,yn=[1,2,3];W(W.P+W.F*(l(function(){yn.sort(void 0)})||!l(function(){yn.sort(null)})||!Dt(hn)),"Array",{sort:function(t){return void 0===t?hn.call(ft(this)):hn.call(ft(this),T(t))}});var mn=Bt(1);W(W.P+W.F*!Dt([].map,!0),"Array",{map:function(t){return mn(this,t,arguments[1])}});var bn=v.f,xn=Function.prototype,_n=/^\s*function ([^ (]*)/;"name"in xn||i&&bn(xn,"name",{configurable:!0,get:function(){try{return(""+this).match(_n)[1]}catch(t){return""}}});var kn=Bt(0),An=Dt([].forEach,!0);W(W.P+W.F*!An,"Array",{forEach:function(t){return kn(this,t,arguments[1])}});var Sn,On,Ln=/"/g;(On={})[Sn="link"]=function(n){return function(t){return n(this,"a","href",t)}}(function(t,n,e,r){var a=String(O(t)),c="<"+n;return""!==e&&(c+=" "+e+'="'+String(r).replace(Ln,"&quot;")+'"'),c+">"+a+"</"+n+">"}),W(W.P+W.F*l(function(){var t=""[Sn]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",On);var wn=f("species"),Tn=Math.min,En=[].push,Cn="split",jn="length",Pn="lastIndex",Mn=4294967295,In=!l(function(){});on("split",2,function(a,c,h,y){var m;return m="c"=="abbc"[Cn](/(b)*/)[1]||4!="test"[Cn](/(?:)/,-1)[jn]||2!="ab"[Cn](/(?:ab)*/)[jn]||4!="."[Cn](/(.?)(.?)/)[jn]||1<"."[Cn](/()()/)[jn]||""[Cn](/.?/)[jn]?function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!Ft(t))return h.call(e,t,n);for(var r,a,c,o=[],i=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,s=void 0===n?Mn:n>>>0,l=new RegExp(t.source,i+"g");(r=cn.call(l,e))&&!(u<(a=l[Pn])&&(o.push(e.slice(u,r.index)),1<r[jn]&&r.index<e[jn]&&En.apply(o,r.slice(1)),c=r[0][jn],u=a,o[jn]>=s));)l[Pn]===r.index&&l[Pn]++;return u===e[jn]?!c&&l.test("")||o.push(""):o.push(e.slice(u)),o[jn]>s?o.slice(0,s):o}:"0"[Cn](void 0,0)[jn]?function(t,n){return void 0===t&&0===n?[]:h.call(this,t,n)}:h,[function(t,n){var e=a(this),r=null==t?void 0:t[c];return void 0!==r?r.call(t,e,n):m.call(String(e),t,n)},function(t,n){var e=y(m,t,this,n,m!==h);if(e.done)return e.value;var r=S(t),a=String(this),c=function(t,n){var e,r=S(t).constructor;return void 0===r||null==(e=S(r)[wn])?n:T(e)}(r,RegExp),o=r.unicode,i=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(In?"y":"g"),u=new c(In?r:"^(?:"+r.source+")",i),s=void 0===n?Mn:n>>>0;if(0==s)return[];if(0===a.length)return null===Ut(u,a)?[a]:[];for(var l=0,f=0,d=[];f<a.length;){u.lastIndex=In?f:0;var p,v=Ut(u,In?a:a.slice(f));if(null===v||(p=Tn($(u.lastIndex+(In?0:f)),a.length))===l)f=qt(a,f,o);else{if(d.push(a.slice(l,f)),d.length===s)return d;for(var g=1;g<=v.length-1;g++)if(d.push(v[g]),d.length===s)return d;f=l=p}}return d.push(a.slice(l)),d}]});function Rn(t){return Nn(t)}var Fn="Tg C yr <sup>-1</sup>",Nn=d3.format(".2f"),Gn={},$n={},zn={},Bn={},Dn={},Vn={},Wn={},Hn={};function qn(t,n){var c=t.split("chart")[1],e=0,r=0,a=0,o=0,i=460-o-r,u=900-e-a,s=d3.select(t).append("svg").attr("width",i+o+r).attr("height",u+e+a).append("g").attr("transform","translate(".concat(o,", ").concat(e,")")),l=d3.sankey().nodeWidth(30).nodePadding(20).size([i,u]),f=l.link();!function(t){var n={};t.nodes.forEach(function(t){n[t.name]=t}),t.links=t.links.map(function(t){return{source:n[t.source],target:n[t.target],value:t.value}}),t.nodes.sort(function(t,n){return d3.descending(t.value,n.value)}),l.nodes(t.nodes).links(t.links).layout(32);var e=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);s.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class",function(t){var n="from".concat(t.source.name.replace(/\s+/g,"")).concat(c),e="to".concat(t.target.name.replace(/\s+/g,"")).concat(c);return"link ".concat(n," ").concat(e)}).attr("d",f).attr("id",function(t,n){return t.id=n,"chart".concat(c,"_link-").concat(n)}).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,n){return n.dy-t.dy}).on("mousemove",function(t){d3.selectAll(".link:not(#".concat(this.id,")")).style("opacity",.5),function(t,n){d3.selectAll("rect").classed("rectInactive",!0);var e=0<t.source.sourceLinks.length?t.source.name:t.target.name,r=d3.select("#"+n.id).attr("class").split(" ").filter(function(t){return t.includes("to")})[0].split("to")[1].slice(0,-1);d3.select("#chart".concat(c)).select("rect.".concat(e)).classed("rectInactive",!1),d3.select("#chart".concat(c)).select("rect.".concat(r)).classed("rectInactive",!1)}(t,this);var n=i18next.t(t.source.name,{ns:"labels"});e.transition().style("opacity",.9),e.html("<b>".concat(n,"</b><br><br>\n          <table>\n              <tr>\n                <td>").concat(t.target.name," flux: </td>\n                <td><b>").concat(Rn(t.value),"</td>\n                <td> ").concat(Fn," </td>\n            </tr>\n          </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".link:not(#chart".concat(c,"_").concat(this.id,")")).style("opacity",1),d3.selectAll("rect").classed("rectInactive",!1),e.transition().style("opacity",0)});var r=s.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class",function(){return"node regions"}).attr("transform",function(t){return"translate(".concat(t.x,",").concat(t.y,")")}).style("cursor",function(){return"crosshair"});r.append("rect").attr("height",function(t){return t.dy}).attr("width",l.nodeWidth()).attr("class",function(t){return t.name.replace(/\s/g,"")}),r.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return i18next.t(t.name,{ns:"labels"})}).filter(function(t){return t.x<i/2}).attr("x",6+l.nodeWidth()).attr("text-anchor","start"),r.on("mousemove",function(t){!function(t){var n,e,r,a;d3.select("#chart"+c).selectAll("rect:not(.".concat(t.name.replace(/\s+/g,""),")")).classed("rectInactive",!0),d3.selectAll(".link").classed("inactive",!0),0<t.sourceLinks.length?(r=t.sourceLinks,a="target",e=d3.selectAll(".from".concat(t.name.replace(/\s+/g,"")).concat(c))):0<t.targetLinks.length&&(r=t.targetLinks,a="source",e=d3.selectAll(".to".concat(t.name.replace(/\s+/g,"")).concat(c))),e.classed("inactive",!e.classed("inactive")),e.classed("active",!0),r.map(function(t){n=t[a].name.replace(/\s+/g,""),d3.select("#chart".concat(c)).select("rect.".concat(n)).classed("rectInactive",!1)})}(t);var n=i18next.t(t.name,{ns:"labels"});e.transition().style("opacity",.9),e.html("<b>".concat(n,"</b><br><br>\n          <table>\n            <tr>\n              <td> Total flux: </td>\n              <td><b>").concat(Rn(t.value),"</td>\n              <td>  ").concat(Fn," </td>\n            </tr>\n          </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".inactive").classed("inactive",!1),d3.selectAll(".active").classed("active",!1),d3.selectAll("rect").classed("rectInactive",!1),e.transition().style("opacity",0)})}(n)}function Un(t,n,e,r){var a=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),c={top:{"#stackedbar_SA":25,"#stackedbar_Africa":10,"#stackedbar_Asia":15,"#stackedbar_NAmer":5,"#stackedbar_Oceania":2,"#stackedbar_Europe":5}[t],right:20,bottom:17,left:40},o=r-c.left-c.right,i=e-c.top-c.bottom,u=d3.scale.ordinal().rangeRoundBands([0,o],.1),s=d3.scale.linear().rangeRound([i,0]),l=d3.scale.ordinal().range(["#A9C1D9","#607890","#ABBE71"]),f=d3.svg.axis().scale(u).orient("bottom"),d="#stackedbar_Oceania"===t?1:3,p=d3.svg.axis().scale(s).orient("left").tickFormat(d3.format(".2s")).ticks(d),v=d3.select(t).append("div").append("svg").attr("width",o+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("transform","translate(".concat(c.left,", ").concat(c.top,")"));l.domain(d3.keys(n[0]).filter(function(t){return"country"!==t})),n.forEach(function(n){var e=n.country,r=0;n.flux=l.domain().map(function(t){return{country:e,loac:t,y0:r,y1:r+=+n[t]}}),n.total=n.flux[n.flux.length-1].y1}),n.sort(function(t,n){return n.total-t.total}),u.domain(n.map(function(t){return t.country})),s.domain([0,d3.max(n,function(t){return t.total})]),"#stackedbar_SA"===t&&v.append("g").attr("class","tick").append("text","text").attr("x",-40).attr("y",-8).html("Tg C yr").style("font-size","11px").append("tspan").text("-1").style("font-size","11px").attr("dx",".01em").attr("dy","-.2em"),v.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(i,")")).call(f),v.append("g").attr("class","y axis").call(p).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end");var g=v.selectAll(".country").data(n).enter().append("g").attr("class","g");g.selectAll("rect").data(function(t){return t.flux}).enter().append("rect").attr("class",function(t){return t.loac}).attr("width",u.rangeBand()).attr("y",function(t){return s(t.y1)}).attr("x",function(t){return u(t.country)}).attr("height",function(t){return s(t.y0)-s(t.y1)}),g.selectAll("rect").on("mousemove",function(t){var n=t.y1-t.y0;a.transition().style("opacity",.9),a.html("<b> ".concat(t.loac," </b><br><br>\n              <table>\n                <tr>\n                  <td><b>").concat(Rn(n)," </td>\n                  <td> ").concat(Fn," </td>\n                </tr>\n              </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){a.transition().style("opacity",0)})}i18n.load(["src/i18n"],function(){queue().defer(d3.json,"data/LOAC_budget_TgCyr181113_sankey1.json").defer(d3.json,"data/LOAC_budget_TgCyr181113_sankey2.json").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_SAmer.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Africa.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Asia.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_NAmer.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Oceania.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Europe.csv").await(function(t,n,e,r,a,c,o,i,u){Gn=n,$n=e,zn=r,Bn=a,Dn=c,Vn=o,Wn=i,Hn=u,d3.select("#pageTitle").text(i18next.t("title",{ns:"pageText"})),qn("#chart1",Gn),qn("#chart2",$n),Un("#stackedbar_SA",zn,225,220),Un("#stackedbar_Africa",Bn,135,140),Un("#stackedbar_Asia",Dn,245,190),Un("#stackedbar_NAmer",Vn,180,130),Un("#stackedbar_Oceania",Wn,35,130),Un("#stackedbar_Europe",Hn,70,180)})})}();