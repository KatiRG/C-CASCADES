!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}function i(t){return"object"==typeof t?null!==t:"function"==typeof t}function w(t){if(!i(t))throw TypeError(t+" is not an object!");return t}function l(t){try{return!!t()}catch(t){return!0}}function r(t){return u?s.createElement(t):{}}function x(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}var g=t(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),h=(g.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),c=t(function(t){var e="__core-js_shared__",n=h[e]||(h[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),e=0,n=Math.random(),f=t(function(t){var e=c("wks"),n=h.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:a)("Symbol."+t))}).store=e}),o=!l(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),s=h.document,u=i(s)&&i(s.createElement),d=!o&&!l(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),p=Object.defineProperty,v={f:o?Object.defineProperty:function(t,e,n){if(w(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),w(n),d)try{return p(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=o?function(t,e,n){return v.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},y=f("unscopables"),m=Array.prototype;null==m[y]&&b(m,y,{});function k(t){m[y][t]=!0}function A(t,e){return{value:e,done:!!t}}function S(t){return j.call(t).slice(8,-1)}function _(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function O(t){return P(_(t))}function T(t,e){return R.call(t,e)}function L(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function E(r,a,t){if(L(r),void 0===a)return r;switch(t){case 1:return function(t){return r.call(a,t)};case 2:return function(t,e){return r.call(a,t,e)};case 3:return function(t,e,n){return r.call(a,t,e,n)}}return function(){return r.apply(a,arguments)}}var C={},j={}.toString,P=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==S(t)?t.split(""):Object(t)},R={}.hasOwnProperty,M=c("native-function-to-string",Function.toString),I=t(function(t){var i=a("src"),e="toString",c=(""+M).split(e);g.inspectSource=function(t){return M.call(t)},(t.exports=function(t,e,n,r){var a="function"==typeof n;a&&(T(n,"name")||b(n,"name",e)),t[e]!==n&&(a&&(T(n,i)||b(n,i,t[e]?""+t[e]:c.join(String(e)))),t===h?t[e]=n:r?t[e]?t[e]=n:b(t,e,n):(delete t[e],b(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||M.call(this)})}),F="prototype",B=function(t,e,n){var r,a,i,c,o=t&B.F,s=t&B.G,u=t&B.S,l=t&B.P,f=t&B.B,d=s?h:u?h[e]||(h[e]={}):(h[e]||{})[F],p=s?g:g[e]||(g[e]={}),v=p[F]||(p[F]={});for(r in s&&(n=e),n)i=((a=!o&&d&&void 0!==d[r])?d:n)[r],c=f&&a?E(i,h):l&&"function"==typeof i?E(Function.call,i):i,d&&I(d,r,i,t&B.U),p[r]!=i&&b(p,r,c),l&&v[r]!=i&&(v[r]=i)};h.core=g,B.F=1,B.G=2,B.S=4,B.P=8,B.B=16,B.W=32,B.U=64,B.R=128;function U(t){return isNaN(t=+t)?0:(0<t?H:z)(t)}function N(t){return 0<t?Y(U(t),9007199254740991):0}function G(o){return function(t,e,n){var r,a=O(t),i=N(a.length),c=function(t,e){return(t=U(t))<0?q(t+e,0):X(t,e)}(n,i);if(o&&e!=e){for(;c<i;)if((r=a[c++])!=r)return!0}else for(;c<i;c++)if((o||c in a)&&a[c]===e)return o||c||0;return!o&&-1}}function $(t){return J[t]||(J[t]=a(t))}function D(){}function V(t,e,n){t&&!T(t=n?t:t.prototype,ut)&&st(t,ut,{configurable:!0,value:e})}var W=B,z=Math.ceil,H=Math.floor,Y=Math.min,q=Math.max,X=Math.min,J=c("keys"),K=G(!1),Q=$("IE_PROTO"),Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return function(t,e){var n,r=O(t),a=0,i=[];for(n in r)n!=Q&&T(r,n)&&i.push(n);for(;e.length>a;)T(r,n=e[a++])&&(~K(i,n)||i.push(n));return i}(t,Z)},et=o?Object.defineProperties:function(t,e){w(t);for(var n,r=tt(e),a=r.length,i=0;i<a;)v.f(t,n=r[i++],e[n]);return t},nt=h.document,rt=nt&&nt.documentElement,at=$("IE_PROTO"),it="prototype",ct=function(){var t,e=r("iframe"),n=Z.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ct=t.F;n--;)delete ct[it][Z[n]];return ct()},ot=Object.create||function(t,e){var n;return null!==t?(D[it]=w(t),n=new D,D[it]=null,n[at]=t):n=ct(),void 0===e?n:et(n,e)},st=v.f,ut=f("toStringTag"),lt={};b(lt,f("iterator"),function(){return this});function ft(t){return Object(_(t))}function dt(){return this}var pt=$("IE_PROTO"),vt=Object.prototype,gt=Object.getPrototypeOf||function(t){return t=ft(t),T(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?vt:null},ht=f("iterator"),yt=!([].keys&&"next"in[].keys()),mt="values",xt=function(t,e,n,r,a,i,c){!function(t,e,n){t.prototype=ot(lt,{next:x(1,n)}),V(t,e+" Iterator")}(n,e,r);function o(t){if(!yt&&t in v)return v[t];switch(t){case"keys":case mt:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var s,u,l,f=e+" Iterator",d=a==mt,p=!1,v=t.prototype,g=v[ht]||v["@@iterator"]||a&&v[a],h=g||o(a),y=a?d?o("entries"):h:void 0,m="Array"==e&&v.entries||g;if(m&&(l=gt(m.call(new t)))!==Object.prototype&&l.next&&(V(l,f,!0),"function"!=typeof l[ht]&&b(l,ht,dt)),d&&g&&g.name!==mt&&(p=!0,h=function(){return g.call(this)}),!yt&&!p&&v[ht]||b(v,ht,h),C[e]=h,C[f]=dt,a)if(s={values:d?h:o(mt),keys:i?h:o("keys"),entries:y},c)for(u in s)u in v||I(v,u,s[u]);else W(W.P+W.F*(yt||p),e,s);return s}(Array,"Array",function(t,e){this._t=O(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,A(1)):A(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");C.Arguments=C.Array,k("keys"),k("values"),k("entries");for(var bt=f("iterator"),kt=f("toStringTag"),At=C.Array,St={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wt=tt(St),_t=0;_t<wt.length;_t++){var Ot,Tt=wt[_t],Lt=St[Tt],Et=h[Tt],Ct=Et&&Et.prototype;if(Ct&&(Ct[bt]||b(Ct,bt,At),Ct[kt]||b(Ct,kt,Tt),C[Tt]=At,Lt))for(Ot in xt)Ct[Ot]||I(Ct,Ot,xt[Ot],!0)}function jt(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Pt))?n:Rt?S(e):"Object"==(r=S(e))&&"function"==typeof e.callee?"Arguments":r}var Pt=f("toStringTag"),Rt="Arguments"==S(function(){return arguments}()),Mt={};Mt[f("toStringTag")]="z",Mt+""!="[object z]"&&I(Object.prototype,"toString",function(){return"[object "+jt(this)+"]"},!0);var It=G(!0);W(W.P,"Array",{includes:function(t){return It(this,t,1<arguments.length?arguments[1]:void 0)}}),k("includes");function Ft(t){var e;return i(t)&&(void 0!==(e=t[Bt])?!!e:"RegExp"==S(t))}var Bt=f("match"),Ut=f("match"),Nt="includes";W(W.P+W.F*function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Ut]=!1,!"/./"[e](n)}catch(t){}}return!0}(Nt),"String",{includes:function(t){return!!~function(t,e,n){if(Ft(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(_(t))}(this,t,Nt).indexOf(t,1<arguments.length?arguments[1]:void 0)}});function Gt(t,e){return new(function(t){var e;return Vt(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Vt(e.prototype)||(e=void 0),i(e)&&null===(e=e[Wt])&&(e=void 0)),void 0===e?Array:e}(t))(e)}function $t(f,t){var d=1==f,p=2==f,v=3==f,g=4==f,h=6==f,y=5==f||h,m=t||Gt;return function(t,e,n){for(var r,a,i=ft(t),c=P(i),o=E(e,n,3),s=N(c.length),u=0,l=d?m(t,s):p?m(t,0):void 0;u<s;u++)if((y||u in c)&&(a=o(r=c[u],u,i),f))if(d)l[u]=a;else if(a)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:l.push(r)}else if(g)return!1;return h?-1:v||g?g:l}}function Dt(t,e){return!!t&&l(function(){e?t.call(null,function(){},1):t.call(null)})}var Vt=Array.isArray||function(t){return"Array"==S(t)},Wt=f("species"),zt=$t(2);W(W.P+W.F*!Dt([].filter,!0),"Array",{filter:function(t){return zt(this,t,arguments[1])}});function Ht(t,e,n){return e+(n?Kt(t,e).length:1)}function Yt(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==jt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Qt.call(t,e)}var qt,Xt,Jt,Kt=(qt=!0,function(t,e){var n,r,a=String(_(t)),i=U(e),c=a.length;return i<0||c<=i?qt?"":void 0:(n=a.charCodeAt(i))<55296||56319<n||i+1===c||(r=a.charCodeAt(i+1))<56320||57343<r?qt?a.charAt(i):n:qt?a.slice(i,i+2):r-56320+(n-55296<<10)+65536}),Qt=RegExp.prototype.exec,Zt=RegExp.prototype.exec,te=String.prototype.replace,ee=Zt,ne="lastIndex",re=(Xt=/a/,Jt=/b*/g,Zt.call(Xt,"a"),Zt.call(Jt,"a"),0!==Xt[ne]||0!==Jt[ne]),ae=void 0!==/()??/.exec("")[1];(re||ae)&&(ee=function(t){var e,n,r,a,i=this;return ae&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var t=w(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i))),re&&(e=i[ne]),r=Zt.call(i,t),re&&r&&(i[ne]=i.global?r.index+r[0].length:e),ae&&r&&1<r.length&&te.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var ie=ee;W({target:"RegExp",proto:!0,forced:ie!==/./.exec},{exec:ie});function ce(n,t,e){var r=f(n),i=!l(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),a=i?!l(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[oe]=function(){return e}),e[r](""),!t}):void 0;if(!i||!a||"replace"===n&&!se||"split"===n&&!ue){var c=/./[r],o=e(_,r,""[n],function(t,e,n,r,a){return e.exec===ie?i&&!a?{done:!0,value:c.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),s=o[0],u=o[1];I(String.prototype,n,s),b(RegExp.prototype,r,2==t?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}}var oe=f("species"),se=!l(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ue=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),le=Math.max,fe=Math.min,de=Math.floor,pe=/\$([$&`']|\d\d?|<[^>]*>)/g,ve=/\$([$&`']|\d\d?)/g;ce("replace",2,function(a,i,k,A){return[function(t,e){var n=a(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):k.call(String(n),t,e)},function(t,e){var n=A(k,t,this,e);if(n.done)return n.value;var r=w(t),a=String(this),i="function"==typeof e;i||(e=String(e));var c=r.global;if(c){var o=r.unicode;r.lastIndex=0}for(var s=[];;){var u=Yt(r,a);if(null===u)break;if(s.push(u),!c)break;""===String(u[0])&&(r.lastIndex=Ht(a,N(r.lastIndex),o))}for(var l,f="",d=0,p=0;p<s.length;p++){u=s[p];for(var v=String(u[0]),g=le(fe(U(u.index),a.length),0),h=[],y=1;y<u.length;y++)h.push(void 0===(l=u[y])?l:String(l));var m=u.groups;if(i){var x=[v].concat(h,g,a);void 0!==m&&x.push(m);var b=String(e.apply(void 0,x))}else b=S(v,a,g,h,m,e);d<=g&&(f+=a.slice(d,g)+b,d=g+v.length)}return f+a.slice(d)}];function S(i,c,o,s,u,t){var l=o+i.length,f=s.length,e=ve;return void 0!==u&&(u=ft(u),e=pe),k.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return i;case"`":return c.slice(0,o);case"'":return c.slice(l);case"<":n=u[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(f<r){var a=de(r/10);return 0===a?t:a<=f?void 0===s[a-1]?e.charAt(1):s[a-1]+e.charAt(1):t}n=s[r-1]}return void 0===n?"":n})}});var ge=[].sort,he=[1,2,3];W(W.P+W.F*(l(function(){he.sort(void 0)})||!l(function(){he.sort(null)})||!Dt(ge)),"Array",{sort:function(t){return void 0===t?ge.call(ft(this)):ge.call(ft(this),L(t))}});var ye=$t(1);W(W.P+W.F*!Dt([].map,!0),"Array",{map:function(t){return ye(this,t,arguments[1])}});var me=v.f,xe=Function.prototype,be=/^\s*function ([^ (]*)/;"name"in xe||o&&me(xe,"name",{configurable:!0,get:function(){try{return(""+this).match(be)[1]}catch(t){return""}}});var ke=$t(0),Ae=Dt([].forEach,!0);W(W.P+W.F*!Ae,"Array",{forEach:function(t){return ke(this,t,arguments[1])}});var Se,we,_e=/"/g;(we={})[Se="link"]=function(e){return function(t){return e(this,"a","href",t)}}(function(t,e,n,r){var a=String(_(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(r).replace(_e,"&quot;")+'"'),i+">"+a+"</"+e+">"}),W(W.P+W.F*l(function(){var t=""[Se]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",we);var Oe=f("species"),Te=Math.min,Le=[].push,Ee="split",Ce="length",je="lastIndex",Pe=4294967295,Re=!l(function(){});ce("split",2,function(a,i,h,y){var m;return m="c"=="abbc"[Ee](/(b)*/)[1]||4!="test"[Ee](/(?:)/,-1)[Ce]||2!="ab"[Ee](/(?:ab)*/)[Ce]||4!="."[Ee](/(.?)(.?)/)[Ce]||1<"."[Ee](/()()/)[Ce]||""[Ee](/.?/)[Ce]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!Ft(t))return h.call(n,t,e);for(var r,a,i,c=[],o=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,u=void 0===e?Pe:e>>>0,l=new RegExp(t.source,o+"g");(r=ie.call(l,n))&&!(s<(a=l[je])&&(c.push(n.slice(s,r.index)),1<r[Ce]&&r.index<n[Ce]&&Le.apply(c,r.slice(1)),i=r[0][Ce],s=a,c[Ce]>=u));)l[je]===r.index&&l[je]++;return s===n[Ce]?!i&&l.test("")||c.push(""):c.push(n.slice(s)),c[Ce]>u?c.slice(0,u):c}:"0"[Ee](void 0,0)[Ce]?function(t,e){return void 0===t&&0===e?[]:h.call(this,t,e)}:h,[function(t,e){var n=a(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):m.call(String(n),t,e)},function(t,e){var n=y(m,t,this,e,m!==h);if(n.done)return n.value;var r=w(t),a=String(this),i=function(t,e){var n,r=w(t).constructor;return void 0===r||null==(n=w(r)[Oe])?e:L(n)}(r,RegExp),c=r.unicode,o=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Re?"y":"g"),s=new i(Re?r:"^(?:"+r.source+")",o),u=void 0===e?Pe:e>>>0;if(0==u)return[];if(0===a.length)return null===Yt(s,a)?[a]:[];for(var l=0,f=0,d=[];f<a.length;){s.lastIndex=Re?f:0;var p,v=Yt(s,Re?a:a.slice(f));if(null===v||(p=Te(N(s.lastIndex+(Re?0:f)),a.length))===l)f=Ht(a,f,c);else{if(d.push(a.slice(l,f)),d.length===u)return d;for(var g=1;g<=v.length-1;g++)if(d.push(v[g]),d.length===u)return d;f=l=p}}return d.push(a.slice(l)),d}]});function Me(t){return De(t)}var Ie={margin:{top:0,right:20,left:25,bottom:47},aspectRatio:.86,width:220,showUnits:!0,x:{ticks:8},y:{ticks:3},viewBox:{x:-25,y:-28}},Fe={margin:{top:0,right:60,left:50,bottom:40},aspectRatio:1.4,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:0,y:-15}},Be={margin:{top:0,right:20,left:25,bottom:47},aspectRatio:.8,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:-25,y:-10}},Ue={margin:{top:0,right:60,left:50,bottom:20},aspectRatio:1.2,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:0,y:0}},Ne={margin:{top:0,right:70,left:50,bottom:22},aspectRatio:4,width:220,showUnits:!1,x:{ticks:8},y:{ticks:1},viewBox:{x:0,y:2}},Ge={margin:{top:0,right:0,left:50,bottom:19},aspectRatio:3.4,width:220,showUnits:!1,x:{ticks:8},y:{ticks:3},viewBox:{x:0,y:0}},$e="Tg C yr <sup>-1</sup>",De=d3.format(".2f"),Ve={},We={},ze={},He={},Ye={},qe={},Xe={},Je={},Ke=d3.select(".data.SAdata").append("svg").attr("id","stackedbar_SA"),Qe=d3.select(".data.AFdata").append("svg").attr("id","stackedbar_Africa"),Ze=d3.select(".data.ASdata").append("svg").attr("id","stackedbar_Asia"),tn=d3.select(".data.NAdata").append("svg").attr("id","stackedbar_NAmer"),en=d3.select(".data.OCdata").append("svg").attr("id","stackedbar_Oceania"),nn=d3.select(".data.EUdata").append("svg").attr("id","stackedbar_Europe");function rn(t,e){var i=t.split("chart")[1],n=0,r=0,a=0,c=0,o=460-c-r,s=900-n-a,u=d3.select(t).append("svg").attr("width",o+c+r).attr("height",s+n+a).append("g").attr("transform","translate(".concat(c,", ").concat(n,")")),l=d3.sankey().nodeWidth(30).nodePadding(20).size([o,s]),f=l.link();!function(t){var e={};t.nodes.forEach(function(t){e[t.name]=t}),t.links=t.links.map(function(t){return{source:e[t.source],target:e[t.target],value:t.value}}),t.nodes.sort(function(t,e){return d3.descending(t.value,e.value)}),l.nodes(t.nodes).links(t.links).layout(32);var n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);u.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class",function(t){var e="from".concat(t.source.name.replace(/\s+/g,"")).concat(i),n="to".concat(t.target.name.replace(/\s+/g,"")).concat(i);return"link ".concat(e," ").concat(n)}).attr("d",f).attr("id",function(t,e){return t.id=e,"chart".concat(i,"_link-").concat(e)}).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).on("mousemove",function(t){d3.selectAll(".link:not(#".concat(this.id,")")).style("opacity",.5),function(t,e){d3.selectAll("rect").classed("rectInactive",!0);var n=0<t.source.sourceLinks.length?t.source.name:t.target.name,r=d3.select("#"+e.id).attr("class").split(" ").filter(function(t){return t.includes("to")})[0].split("to")[1].slice(0,-1);d3.select("#chart".concat(i)).select("rect.".concat(n)).classed("rectInactive",!1),d3.select("#chart".concat(i)).select("rect.".concat(r)).classed("rectInactive",!1)}(t,this);var e=i18next.t(t.source.name,{ns:"labels"});n.transition().style("opacity",.9),n.html("<b>".concat(e,"</b><br><br>\n          <table>\n              <tr>\n                <td>").concat(t.target.name," flux: </td>\n                <td><b>").concat(Me(t.value),"</td>\n                <td> ").concat($e," </td>\n            </tr>\n          </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".link:not(#chart".concat(i,"_").concat(this.id,")")).style("opacity",1),d3.selectAll("rect").classed("rectInactive",!1),n.transition().style("opacity",0)});var r=u.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class",function(){return"node regions"}).attr("transform",function(t){return"translate(".concat(t.x,",").concat(t.y,")")}).style("cursor",function(){return"crosshair"});r.append("rect").attr("height",function(t){return t.dy}).attr("width",l.nodeWidth()).attr("class",function(t){return t.name.replace(/\s/g,"")}),r.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return i18next.t(t.name,{ns:"labels"})}).filter(function(t){return t.x<o/2}).attr("x",6+l.nodeWidth()).attr("text-anchor","start"),r.on("mousemove",function(t){!function(t){var e,n,r,a;d3.select("#chart"+i).selectAll("rect:not(.".concat(t.name.replace(/\s+/g,""),")")).classed("rectInactive",!0),d3.selectAll(".link").classed("inactive",!0),0<t.sourceLinks.length?(r=t.sourceLinks,a="target",n=d3.selectAll(".from".concat(t.name.replace(/\s+/g,"")).concat(i))):0<t.targetLinks.length&&(r=t.targetLinks,a="source",n=d3.selectAll(".to".concat(t.name.replace(/\s+/g,"")).concat(i))),n.classed("inactive",!n.classed("inactive")),n.classed("active",!0),r.map(function(t){e=t[a].name.replace(/\s+/g,""),d3.select("#chart".concat(i)).select("rect.".concat(e)).classed("rectInactive",!1)})}(t);var e=i18next.t(t.name,{ns:"labels"});n.transition().style("opacity",.9),n.html("<b>".concat(e,"</b><br><br>\n          <table>\n            <tr>\n              <td> Total flux: </td>\n              <td><b>").concat(Me(t.value),"</td>\n              <td>  ").concat($e," </td>\n            </tr>\n          </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){d3.selectAll(".inactive").classed("inactive",!1),d3.selectAll(".active").classed("active",!1),d3.selectAll("rect").classed("rectInactive",!1),n.transition().style("opacity",0)})}(e)}function an(t,e,n){var r=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),a=e.width,i=Math.ceil(a/e.aspectRatio),c=i-e.margin.top-e.margin.bottom,o=a-e.margin.left-e.margin.right,s=t.select("g.margin-offset");s.select(".data");t.attr("viewBox","".concat(e.viewBox.x," ").concat(e.viewBox.y," ").concat(a," ").concat(i)).attr("preserveAspectRatio","xMidYMid meet").attr("role","img");var u=s.select(".x.axis"),l=s.select(".y.axis");s.empty()&&(s=t.append("g").attr("class","margin-offset").attr("transform","translate("+e.margin.left+","+e.margin.top+")"));var f=d3.scale.ordinal().rangeRoundBands([0,o],e.barWidth?e.barWidth:.1),d=d3.scale.linear().rangeRound([c,0]),p=d3.scale.ordinal().range(["#A9C1D9","#607890","#ABBE71"]),v=d3.svg.axis().scale(f).orient("bottom"),g=d3.svg.axis().scale(d).orient("left").tickFormat(d3.format(".2s")).ticks(e.y.ticks);p.domain(d3.keys(n[0]).filter(function(t){return"country"!==t})),n.forEach(function(e){var n=e.country,r=0;e.flux=p.domain().map(function(t){return{country:n,loac:t,y0:r,y1:r+=+e[t]}}),e.total=e.flux[e.flux.length-1].y1}),n.sort(function(t,e){return e.total-t.total}),f.domain(n.map(function(t){return t.country})),d.domain([0,d3.max(n,function(t){return t.total})]),e.showUnits&&s.append("g").attr("class","tick").attr("class","yaxisUnits").append("text").attr("x",-45).attr("y",-8).html("".concat(i18next.t("units",{ns:"constants"}))).append("tspan").text("-1").attr("dx",".01em").attr("dy","-.2em"),(u=s.select(".x.axis")).empty()&&(u=s.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(c,")"))),u.call(v),(l=s.select(".y.axis")).empty()&&(l=s.append("g").attr("class","y axis").attr("aria-hidden","true")),l.call(g);var h=t.selectAll(".country").data(n).enter().append("g").attr("class","g");h.selectAll("rect").data(function(t){return t.flux}).enter().append("rect").attr("class",function(t){return t.loac}).attr("width",f.rangeBand()).attr("y",function(t){return d(t.y1)}).attr("x",function(t){return f(t.country)+e.margin.left}).attr("height",function(t){return d(t.y0)-d(t.y1)}),h.selectAll("rect").on("mousemove",function(t){var e=t.y1-t.y0;r.transition().style("opacity",.9),r.html("<b> ".concat(t.loac," </b><br><br>\n              <table>\n                <tr>\n                  <td><b>").concat(Me(e)," </td>\n                  <td> ").concat($e," </td>\n                </tr>\n              </table>")).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(){r.transition().style("opacity",0)}),d3.stcExt.addIEShim(t,i,a)}i18n.load(["src/i18n"],function(){queue().defer(d3.json,"data/LOAC_budget_TgCyr181113_sankey1.json").defer(d3.json,"data/LOAC_budget_TgCyr181113_sankey2.json").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_SAmer.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Africa.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Asia.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_NAmer.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Oceania.csv").defer(d3.csv,"data/LOAC_budget_TgCyr181113_stackedbar_Europe.csv").await(function(t,e,n,r,a,i,c,o,s){Ve=e,We=n,ze=r,He=a,Ye=i,qe=c,Xe=o,Je=s,d3.select("#titletag").html(i18next.t("titletag",{ns:"pageText"})),d3.select("#pageTitle").html(i18next.t("title",{ns:"pageText"})),d3.select("#infotext").html(i18next.t("infotext",{ns:"pageText"})),d3.select("#subtitle").html(i18next.t("subtitle",{ns:"pageText"})),rn("#chart1",Ve),rn("#chart2",We),an(Ke,Ie,ze),an(Qe,Fe,He),an(Ze,Be,Ye),an(tn,Ue,qe),an(en,Ne,Xe),an(nn,Ge,Je)})})}();